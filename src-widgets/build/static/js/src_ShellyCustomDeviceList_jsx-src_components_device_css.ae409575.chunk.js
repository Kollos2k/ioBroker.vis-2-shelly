/*! For license information please see src_ShellyCustomDeviceList_jsx-src_components_device_css.ae409575.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkiobroker_vis_2_shelly=self.webpackChunkiobroker_vis_2_shelly||[]).push([["src_ShellyCustomDeviceList_jsx-src_components_device_css","node_modules_react_jsx-runtime_js-_c9180","node_modules_react_jsx-runtime_js-_c9181","node_modules_react_jsx-runtime_js-_c9182","node_modules_react_jsx-runtime_js-_c9183","node_modules_object-assign_index_js"],{29822:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});s(28437);var i=s(67085),n=(s(37449),s(59797)),a=s(40288),o=s(15713),r=s(70579);class c extends(window.visRxWidget||n.VisRxWidget){constructor(e){super(e),this.state.allDevices={},this.state.deviceList={},console.debug("THIS DEVICES"),console.debug(this)}static getWidgetInfo(){return{id:"tplCustomDeviceListWidget",visSet:"vis-2-shelly",visSetLabel:"vis_2_widgets_shelly",visSetColor:"#cf00ff",visName:"CustomDeviceList",visAttrs:[{name:"common",fields:[{name:"display",label:"vis_2_widgets_shelly_display",type:"select",options:[{value:"block",label:"block"},{value:"flex",label:"flex"}],noTranslation:!0,default:"block"},{name:"count",type:"number",default:1,label:"vis_2_widgets_shelly_device_count",onChange:(e,t,s)=>s(t)}]},{name:"devices",label:"vis_2_widgets_shelly_group_devices",indexFrom:1,indexTo:"count",fields:[{name:"device",label:"vis_2_widgets_shelly_device",type:"custom",component:(e,t,s,i,n,a,o)=>{const c="undefined"!==typeof i.context.socket.states.deviceList?i.context.socket.states.deviceList:{};return(0,r.jsxs)("select",{name:"ShellyDeviceList_DeviceSelect",style:{width:"100%"},value:t[e.name],onChange:t=>{s({[e.name]:t.target.value})},children:[(0,r.jsx)("option",{value:"",children:"-- Select device --"}),Object.entries(c).map((e=>{let[t,s]=e;return(0,r.jsx)("option",{value:t,children:null!==s.name&&s.name.length>0?s.name:s.id})}))]})}}]}],visPrev:"widgets/vis-2-shelly/vis2/img/editor/allDevices.png"}}async propertiesUpdate(){this.updateDeviceList()}async updateDeviceList(){this.state.deviceList={};for(let e=1;e<=this.state.data.count;e++)"undefined"!==typeof this.state.data["device".concat(e)]&&"undefined"!==typeof this.state.allDevices[this.state.data["device".concat(e)]]&&(this.state.deviceList[e]=this.state.allDevices[this.state.data["device".concat(e)]]);this.forceUpdate()}async componentDidMount(){super.componentDidMount(),this.props.context.socket.subscribeState(["vis-2-shelly.0.devices.ids"],((e,t)=>{this.state.allDevices=JSON.parse(t.val),this.props.context.socket.states.deviceList=this.state.allDevices,this.updateDeviceList(),this.forceUpdate()})),await this.propertiesUpdate()}getWidgetInfo(){return c.getWidgetInfo()}async onRxDataChanged(){console.debug("onRxDataChanged"),await this.propertiesUpdate()}async onRxStyleChanged(){}async onStateUpdated(e,t){}renderWidgetBody(e){return super.renderWidgetBody(e),(0,r.jsx)(i.Card,{style:{width:"100%",height:"100%"},children:(0,r.jsx)(i.CardContent,{children:Object.values(this.state.deviceList).map((e=>{this.vsID="vis-2-shelly.".concat(e.instance,".devices.").concat(e.id),this.domID=e.id.replaceAll("#","");const t=(0,o.A)(e.type,this.domID,{stateID:e.stateId,type:e.type,id:e.id},this.vsID);if("undefined"!==typeof t.dataPoint&&"undefined"!==typeof t.dataPoint[e.relay]){const s=t.domID+e.relay;return(0,r.jsx)(a.A,{stateID:e.stateId,type:e.type,id:e.id,typeConfig:t,deviceDomID:s,relay:e.relay,state:this.state,dataPoint:t.dataPoint[e.relay],socket:this.props.context.socket,widID:this.props.id})}}))})})}}const l=c},42123:e=>{var t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},s=0;s<10;s++)t["_"+String.fromCharCode(s)]=s;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(n){return!1}}()?Object.assign:function(e,n){for(var a,o,r=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in a=Object(arguments[c]))s.call(a,l)&&(r[l]=a[l]);if(t){o=t(a);for(var d=0;d<o.length;d++)i.call(a,o[d])&&(r[o[d]]=a[o[d]])}}return r}},51153:(e,t,s)=>{s(42123);var i=s(28437),n=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;n=a("react.element"),t.Fragment=a("react.fragment")}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,s){var i,a={},l=null,d=null;for(i in void 0!==s&&(l=""+s),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,i)&&!c.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:n,type:e,key:l,ref:d,props:a,_owner:o.current}}t.jsx=l,t.jsxs=l},70579:(e,t,s)=>{e.exports=s(51153)}}]);
//# sourceMappingURL=src_ShellyCustomDeviceList_jsx-src_components_device_css.ae409575.chunk.js.map