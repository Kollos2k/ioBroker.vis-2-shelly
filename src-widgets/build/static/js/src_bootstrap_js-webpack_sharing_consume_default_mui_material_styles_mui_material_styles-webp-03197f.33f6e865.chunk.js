"use strict";(self.webpackChunkiobroker_vis_2_shelly=self.webpackChunkiobroker_vis_2_shelly||[]).push([["src_bootstrap_js-webpack_sharing_consume_default_mui_material_styles_mui_material_styles-webp-03197f"],{64462:(e,t,s)=>{s.r(t);var i=s(769),o=(s(28437),s(32719)),a=s(39609),d=s(37449),l=s(67085),n=s(59797),c=s(60318),_=s(15713),r=s(70579);class v extends(window.visRxWidget||n.VisRxWidget){constructor(e){super(e),this.state.allDevices={},this.state.showDeviceDialog=!1,console.debug("THIS"),console.debug(this)}static getWidgetInfo(){return{id:"tplAllDevicesWidget",visSet:"vis-2-shelly",visSetLabel:"vis_2_widgets_shelly",visSetColor:"#cf00ff",visName:"AllDevices",visAttrs:[{name:"common",fields:[{name:"display",label:"vis_2_widgets_shelly_display",type:"select",options:[{value:"block",label:"block"},{value:"flex",label:"flex"}],noTranslation:!0,default:"block"}]}],visPrev:"widgets/vis-2-shelly/vis2/img/editor/allDevices.png"}}async propertiesUpdate(){}async updateTypeConfig(e){this.state.typeConfig={};for(const t in e){const s=e[t];this.vsID="vis-2-shelly.".concat(s.instance,".devices.").concat(s.id),this.domID=s.id.replaceAll("#",""),e[t].typeConfig=await(0,_.A)(s.type,this.domID,{stateID:s.stateId,type:s.type,id:s.id,socket:this.props.context.socket},this.vsID)}this.state.allDevices=e,this.setState({allDevices:e})}async componentDidMount(){super.componentDidMount(),this.props.context.socket.subscribeState(["vis-2-shelly.0.devices.ids"],((e,t)=>{this.updateTypeConfig(JSON.parse(t.val))})),await this.propertiesUpdate()}getWidgetInfo(){return v.getWidgetInfo()}async onRxDataChanged(){console.debug("onRxDataChanged"),await this.propertiesUpdate()}async onRxStyleChanged(){}async onStateUpdated(e,t){}showDeviceOptions(){this.setState({showDeviceDialog:!0},(()=>{}))}hideDeviceOptions(){this.setState({showDeviceDialog:!1},(()=>{}))}renderWidgetBody(e){return super.renderWidgetBody(e),(0,r.jsxs)(l.Card,{style:{width:"100%",height:"100%"},children:[(0,r.jsx)(l.CardContent,{children:Object.values(this.state.allDevices).map((e=>{this.vsID="vis-2-shelly.".concat(e.instance,".devices.").concat(e.id),console.debug(this.vsID),this.domID=e.id.replaceAll("#","");const t=e.typeConfig;if(console.debug(t),"undefined"!==typeof t&&"undefined"!==typeof t.dataPoint&&"undefined"!==typeof t.dataPoint[e.relay]){const s=t.domID+e.relay;return(0,r.jsx)(c.A,{stateID:e.stateId,type:e.type,id:e.id,typeConfig:t,deviceDomID:s,relay:e.relay,state:this.state,dataPoint:t.dataPoint[e.relay],socket:this.props.context.socket,widID:this.props.id,parentThis:this})}}))}),this.state.showDeviceDialog&&(0,r.jsx)("div",{children:"test"})]})}}const p=v;class h extends(window.visRxWidget||n.VisRxWidget){constructor(e){super(e),this.state.allDevices={},this.state.roomDevices={},console.debug("THIS ROOM"),console.debug(this)}static getWidgetInfo(){return{id:"tplByRoomDevicesWidget",visSet:"vis-2-shelly",visSetLabel:"vis_2_widgets_shelly",visSetColor:"#cf00ff",visName:"ByRoomDevices",visAttrs:[{name:"common",fields:[{name:"display",label:"vis_2_widgets_shelly_display",type:"select",options:[{value:"block",label:"block"},{value:"flex",label:"flex"}],noTranslation:!0,default:"block"},{name:"rooms",label:"vis_2_widgets_shelly_rooms",type:"custom",component:(e,t,s,i,o,a,d)=>{const l="undefined"!==typeof i.context.socket.states.roomList?i.context.socket.states.roomList:{};return(0,r.jsxs)("select",{name:"ShellyByRoom_RoomSelect",style:{width:"100%"},value:t[e.name],onChange:o=>{s({[e.name]:o.target.value}),console.debug(e),console.debug(t),console.debug(s),console.debug(i)},children:[(0,r.jsx)("option",{value:"",children:"-- Select room --"}),Object.entries(l).map((e=>{let[t,s]=e;return(0,r.jsx)("option",{value:t,children:s})}))]})}}]}],visPrev:"widgets/vis-2-shelly/vis2/img/editor/allDevices.png"}}async propertiesUpdate(){this.updateRoomDevices()}async updateRoomDevices(){this.state.roomDevices={},"undefined"!==typeof this.state.data.rooms&&(Object.entries(this.state.allDevices).forEach((e=>{let[t,s]=e;s.room===this.state.data.rooms&&(this.state.roomDevices[t]=s)})),this.updateTypeConfig(this.state.roomDevices))}async updateTypeConfig(e){this.state.typeConfig={};for(const t in e){const s=e[t];this.vsID="vis-2-shelly.".concat(s.instance,".devices.").concat(s.id),this.domID=s.id.replaceAll("#",""),e[t].typeConfig=await(0,_.A)(s.type,this.domID,{stateID:s.stateId,type:s.type,id:s.id,socket:this.props.context.socket},this.vsID)}this.state.allDevices=e,this.setState({roomDevices:e}),this.forceUpdate()}async componentDidMount(){super.componentDidMount(),"undefined"===typeof this.props.context.socket.states.roomList&&this.props.context.socket.subscribeState(["vis-2-shelly.0.devices.roomIds"],((e,t)=>{this.state.rooms=JSON.parse(t.val),this.props.context.socket.states.roomList=this.state.rooms})),this.props.context.socket.subscribeState(["vis-2-shelly.0.devices.ids"],((e,t)=>{this.state.allDevices=JSON.parse(t.val),this.updateRoomDevices(),this.forceUpdate()})),await this.propertiesUpdate()}getWidgetInfo(){return h.getWidgetInfo()}async onRxDataChanged(){console.debug("onRxDataChanged"),await this.propertiesUpdate()}async onRxStyleChanged(){}async onStateUpdated(e,t){}renderWidgetBody(e){return super.renderWidgetBody(e),console.debug("room devices"),console.debug(this.state.roomDevices),(0,r.jsx)(l.Card,{style:{width:"100%",height:"100%"},children:(0,r.jsx)(l.CardContent,{children:Object.values(this.state.roomDevices).map((e=>{this.vsID="vis-2-shelly.".concat(e.instance,".devices.").concat(e.id),this.domID=e.id.replaceAll("#","");const t=e.typeConfig;if("undefined"!==typeof t&&"undefined"!==typeof t.dataPoint&&"undefined"!==typeof t.dataPoint[e.relay]){const s=t.domID+e.relay;return(0,r.jsx)(c.A,{stateID:e.stateId,type:e.type,id:e.id,typeConfig:t,deviceDomID:s,relay:e.relay,state:this.state,dataPoint:t.dataPoint[e.relay],socket:this.props.context.socket,widID:this.props.id})}}))})})}}const g=h;class y extends(window.visRxWidget||n.VisRxWidget){constructor(e){super(e),this.state.allDevices={},this.state.deviceList={},console.debug("THIS DEVICES"),console.debug(this)}static getWidgetInfo(){return{id:"tplCustomDeviceListWidget",visSet:"vis-2-shelly",visSetLabel:"vis_2_widgets_shelly",visSetColor:"#cf00ff",visName:"CustomDeviceList",visAttrs:[{name:"common",fields:[{name:"display",label:"vis_2_widgets_shelly_display",type:"select",options:[{value:"block",label:"block"},{value:"flex",label:"flex"}],noTranslation:!0,default:"block"},{name:"count",type:"number",default:1,label:"vis_2_widgets_shelly_device_count",onChange:(e,t,s)=>s(t)}]},{name:"devices",label:"vis_2_widgets_shelly_group_devices",indexFrom:1,indexTo:"count",fields:[{name:"device",label:"vis_2_widgets_shelly_device",type:"custom",component:(e,t,s,i,o,a,d)=>{const l="undefined"!==typeof i.context.socket.states.deviceList?i.context.socket.states.deviceList:{};return(0,r.jsxs)("select",{name:"ShellyDeviceList_DeviceSelect",style:{width:"100%"},value:t[e.name],onChange:t=>{s({[e.name]:t.target.value})},children:[(0,r.jsx)("option",{value:"",children:"-- Select device --"}),Object.entries(l).map((e=>{let[t,s]=e;return(0,r.jsx)("option",{value:t,children:null!==s.name&&s.name.length>0?s.name:s.id})}))]})}}]}],visPrev:"widgets/vis-2-shelly/vis2/img/editor/allDevices.png"}}async propertiesUpdate(){this.updateDeviceList()}async updateDeviceList(){this.state.deviceList={};for(let e=1;e<=this.state.data.count;e++)"undefined"!==typeof this.state.data["device".concat(e)]&&"undefined"!==typeof this.state.allDevices[this.state.data["device".concat(e)]]&&(this.state.deviceList[e]=this.state.allDevices[this.state.data["device".concat(e)]]);this.updateTypeConfig(this.state.deviceList)}async updateTypeConfig(e){this.state.typeConfig={};for(const t in e){const s=e[t];this.vsID="vis-2-shelly.".concat(s.instance,".devices.").concat(s.id),this.domID=s.id.replaceAll("#",""),e[t].typeConfig=await(0,_.A)(s.type,this.domID,{stateID:s.stateId,type:s.type,id:s.id,socket:this.props.context.socket},this.vsID)}this.state.allDevices=e,this.setState({deviceList:e}),this.forceUpdate()}async componentDidMount(){super.componentDidMount(),this.props.context.socket.subscribeState(["vis-2-shelly.0.devices.ids"],((e,t)=>{this.state.allDevices=JSON.parse(t.val),this.props.context.socket.states.deviceList=this.state.allDevices,this.updateDeviceList(),this.forceUpdate()})),await this.propertiesUpdate()}getWidgetInfo(){return y.getWidgetInfo()}async onRxDataChanged(){console.debug("onRxDataChanged"),await this.propertiesUpdate()}async onRxStyleChanged(){}async onStateUpdated(e,t){}renderWidgetBody(e){return super.renderWidgetBody(e),(0,r.jsx)(l.Card,{style:{width:"100%",height:"100%"},children:(0,r.jsx)(l.CardContent,{children:Object.values(this.state.deviceList).map((e=>{this.vsID="vis-2-shelly.".concat(e.instance,".devices.").concat(e.id),this.domID=e.id.replaceAll("#","");const t=e.typeConfig;if("undefined"!==typeof t&&"undefined"!==typeof t.dataPoint&&"undefined"!==typeof t.dataPoint[e.relay]){const s=t.domID+e.relay;return(0,r.jsx)(c.A,{stateID:e.stateId,type:e.type,id:e.id,typeConfig:t,deviceDomID:s,relay:e.relay,state:this.state,dataPoint:t.dataPoint[e.relay],socket:this.props.context.socket,widID:this.props.id})}}))})})}}const u=y,m={en:s(75553),de:s(46477),ru:s(63715),pt:s(74606),nl:s(86164),fr:s(74554),it:s(66851),es:s(72706),pl:s(23638),"zh-cn":s(80222)};class w extends a.A{constructor(e){super(e),this.onConnectionChanged=e=>{e&&this.socket.getSystemConfig().then((e=>this.setState({systemConfig:e})))},d.i18n.extendTranslations(m),this.socket.registerConnectionHandler(this.onConnectionChanged)}renderWidget(){const e={allDevices:p.getWidgetInfo(),roomDevices:g.getWidgetInfo(),customDeviceList:u.getWidgetInfo()};return(0,r.jsx)("div",{className:this.props.classes.app,children:(0,r.jsx)("div",{children:Object.keys(e).map((e=>(0,r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:e},e)))})})}}const D=(0,o.withStyles)((e=>({app:{}})))(w);(0,i.A)(D)},46477:e=>{e.exports=JSON.parse('{"My Demo widget: ":"Mein Demo-Widget:","vis_2_widgets_template":"Widgets-Vorlage","vis_2_widgets_template_oid":"Objekt Identifikation","vis_2_widgets_template_private":"Privatgel\xe4nde","vis_2_widgets_template_type":"Typ"}')},75553:e=>{e.exports=JSON.parse('{"vis_2_widgets_shelly":"VIS-2 Shelly","AllDevices":"All Devices","vis_2_widgets_shelly_display":"Display type","vis_2_widgets_shelly_rooms":"Room","vis_2_widgets_shelly_device_count":"Count","vis_2_widgets_shelly_device":"Device","vis_2_widgets_shelly_group_devices":"Device","vis_2_widgets_shelly_overview_title":"Main title","vis_2_widgets_shelly_overview_titleImage":"main title icon","vis_2_widgets_shelly_overview_backColor":"background color inner","vis_2_widgets_shelly_overview_backColorOut":"background-color outer","vis_2_widgets_shelly_overview_textColor":"Text color","vis_2_widgets_shelly_overview_valueGroupCount":"Value count","vis_2_widgets_shelly_overview_group":"Value","vis_2_widgets_shelly_overview_subTitle":"Value title","vis_2_widgets_shelly_overview_subOID":"Value ID","vis_2_widgets_shelly_overview_subUnit":"Value unit","vis_2_widgets_shelly_overview_subIcon":"Value icon","vis_2_widgets_shelly_overview_subSeperator":"Value seperator","vis_2_widgets_shelly_overview_subAddOID1":"SubValue 1 ID","vis_2_widgets_shelly_overview_subAddUnit1":"SubValue 1 unit","vis_2_widgets_shelly_overview_subAddIcon1":"SubValue 1 icon","vis_2_widgets_shelly_overview_subAddOID2":"SubValue 2 ID","vis_2_widgets_shelly_overview_subAddUnit2":"SubValue 2 unit","vis_2_widgets_shelly_overview_subAddIcon2":"SubValue 2 icon","vis_2_widgets_shelly_overview_subHR":"Show sub horizontal","vis_2_widgets_shelly_overview_padding":"padding","vis_2_widgets_shelly_overview_margin":"margin","vis_2_widgets_shelly_overview_cssstyle":"Style","vis_2_widgets_shelly_overview_borderRadius":"border-radius"}')},72706:e=>{e.exports=JSON.parse('{"My Demo widget: ":"Mi widget de demostraci\xf3n:","vis_2_widgets_template":"Plantilla de widgets","vis_2_widgets_template_oid":"ID de objeto","vis_2_widgets_template_private":"Privado","vis_2_widgets_template_type":"Escribe"}')},74554:e=>{e.exports=JSON.parse('{"My Demo widget: ":"Widget Ma d\xe9mo\xa0:","vis_2_widgets_template":"Mod\xe8le de widget","vis_2_widgets_template_oid":"ID d\'objet","vis_2_widgets_template_private":"Priv\xe9","vis_2_widgets_template_type":"Taper"}')},66851:e=>{e.exports=JSON.parse('{"My Demo widget: ":"Il mio widget demo:","vis_2_widgets_template":"Modello di widget","vis_2_widgets_template_oid":"ID oggetto","vis_2_widgets_template_private":"Privato","vis_2_widgets_template_type":"Tipo"}')},86164:e=>{e.exports=JSON.parse('{"My Demo widget: ":"Mijn demo-widget:","vis_2_widgets_template":"Widgetsjabloon","vis_2_widgets_template_oid":"Object-ID","vis_2_widgets_template_private":"Privaat","vis_2_widgets_template_type":"Type"}')},23638:e=>{e.exports=JSON.parse('{"My Demo widget: ":"Wid\u017cet Moje demo:","vis_2_widgets_template":"Szablon wid\u017cet\xf3w","vis_2_widgets_template_oid":"Identyfikator obiektu","vis_2_widgets_template_private":"Prywatny","vis_2_widgets_template_type":"Rodzaj"}')},74606:e=>{e.exports=JSON.parse('{"My Demo widget: ":"Meu widget de demonstra\xe7\xe3o:","vis_2_widgets_template":"Modelo de widgets","vis_2_widgets_template_oid":"ID do objeto","vis_2_widgets_template_private":"Privado","vis_2_widgets_template_type":"Modelo"}')},63715:e=>{e.exports=JSON.parse('{"My Demo widget: ":"\u041c\u043e\u0439 \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0432\u0438\u0434\u0436\u0435\u0442:","vis_2_widgets_template":"\u0428\u0430\u0431\u043b\u043e\u043d \u0432\u0438\u0434\u0436\u0435\u0442\u043e\u0432","vis_2_widgets_template_oid":"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043e\u0431\u044a\u0435\u043a\u0442\u0430","vis_2_widgets_template_private":"\u0427\u0430\u0441\u0442\u043d\u044b\u0439","vis_2_widgets_template_type":"\u0422\u0438\u043f"}')},80222:e=>{e.exports=JSON.parse('{"My Demo widget: ":"\u6211\u7684\u6f14\u793a\u5c0f\u90e8\u4ef6\uff1a","vis_2_widgets_template":"\u5c0f\u90e8\u4ef6\u6a21\u677f","vis_2_widgets_template_oid":"\u5bf9\u8c61 ID","vis_2_widgets_template_private":"\u79c1\u4eba\u7684","vis_2_widgets_template_type":"\u7c7b\u578b"}')}}]);
//# sourceMappingURL=src_bootstrap_js-webpack_sharing_consume_default_mui_material_styles_mui_material_styles-webp-03197f.33f6e865.chunk.js.map